---
const links = {
  spotify: "https://open.spotify.com/album/0etaKC2CeyXY2kiISQIglF",
  deezer: "https://www.deezer.com/album/820007491",
  apple: "https://geo.music.apple.com/album/musique-de-quartiers-live-ep/1839450803?app=music",
  tidal: "https://www.tidal.com/album/460068619",
  ytmusic: "https://music.youtube.com/channel/MPREb_M6dva1XZfsw",
  bandcamp: "https://lescavistes.bandcamp.com/album/musique-de-quartiers",
  video: "https://www.youtube-nocookie.com/embed/MJlk_JYmVZI",
  facebook: "https://www.facebook.com/lescavistespehant",
  instagram: "https://www.instagram.com/lescavistes.nantes/"
};
const title = "Les Cavistes ‚Äî Musique de quartiers (Live EP)";
const description = "√âcoute l‚ÄôEP, d√©couvre le clip et nos actus. Musique de quartiers, joyeuse et conviviale.";

/** √Ä venir */
const events = [
  {
    date: "2026-01-16",
    title: "Cave Paul & Joseph ‚Äî Redon",
    city: "Redon",
    links: [{ label: "Instagram", url: "https://www.instagram.com/pauletjosephredon/" }]
  },
  {
    date: "2026-01-23",
    title: "Cave Paul & Joseph ‚Äî Savenay",
    city: "Savenay",
    links: [{ label: "Instagram", url: "https://www.instagram.com/pauletjosephsavenay/" }]
  },
  {
    // mois seul = 1er par d√©faut, en attendant la date exacte
    date: "2026-03-01",
    title: "Do It Bar ‚Äî Nantes",
    city: "Nantes",
    links: [
      { label: "Facebook", url: "https://www.facebook.com/p/Do-It-Bar-Nantes-61554562344720/" },
      { label: "Instagram", url: "https://www.instagram.com/doitbar_nantes/" }
    ],
    note: "Date exacte en mars √† confirmer"
  },
  {
    date: "2026-05-26",
    title: "F√™te du producteur ‚Äî EARL Philippe Doux (Touvois)",
    city: "Touvois",
    links: [{ label: "Facebook (Les Doux L√©gumes)", url: "https://www.facebook.com/61578303740806/" }]
  }
];

/** Historique (s√©lection) */
const past = [
  {
    date: "2025-09-23",
    title: "Release Party ‚Äî La Cour du Coin",
    city: "Nantes",
    links: [{ label: "Instagram", url: "https://www.instagram.com/lacourducoin/" }]
  },
  {
    date: "2025-05-24",
    title: "F√™te du Lait de Mai",
    city: "Nantes",
    links: [
      { label: "Site officiel", url: "https://www.fetedulaitdemai.com/" },
      { label: "Infos ville", url: "https://metropole.nantes.fr/actualites/les-folivettes-fetent-le-mois-de-mai" }
    ]
  },
  {
    date: "2025-03-06",
    title: "Do It Bar",
    city: "Nantes",
    links: [{ label: "Instagram", url: "https://www.instagram.com/doitbar_nantes/" }]
  },
  {
    date: "2024-12-06",
    title: "La Motte aux Cochons",
    city: "Saint-Hilaire-de-Chal√©ons",
    links: [{ label: "Facebook", url: "https://www.facebook.com/Motteauxcochons/" }]
  },
  {
    date: "2024-09-29",
    title: "BalaBala",
    city: "Redon",
    links: [{ label: "Facebook", url: "https://www.facebook.com/p/Balabala-100086272005102/" }]
  },
  {
    date: "2024-09-28",
    title: "Au Bon Muscadet",
    city: "Redon",
    links: [
      { label: "Site", url: "https://www.aubonmuscadet.fr/programmation-pass%C3%A9e" }
    ]
  },
  {
    date: "2024-03-29",
    title: "Poum Poum T'chak",
    city: "Nantes",
    links: [{ label: "Instagram", url: "https://www.instagram.com/poum.poumtchak/" }]
  },
  {
    date: "2023-09-30",
    title: "Live √† Redon",
    city: "Redon",
    note: "Lieu √† pr√©ciser"
  }
];

const formatDate = (iso) =>
  new Intl.DateTimeFormat("fr-FR", { weekday:"long", day:"2-digit", month:"long", year:"numeric" })
    .format(new Date(iso));
---

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <meta name="color-scheme" content="light" />
    <title>{title}</title>
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <style>
      :root { --max: 880px; }
      html, body { margin:0; padding:0; background:#fff; color:#111; }
      body {
        font-family: "Segoe UI Variable Text", "Segoe UI", Inter, "Helvetica Neue",
                     Arial, system-ui, -apple-system, "Liberation Sans", sans-serif;
        font-weight: 300; /* rendu light sur Windows */
        line-height: 1.55;
      }
      .wrap { max-width: var(--max); margin: 0 auto; padding: 28px 20px 40px; }
      .topnav { display:flex; gap:14px; margin: 0 0 16px; }
      .topnav a { color:#111; text-decoration: underline; }
      header h1 { font-weight: 300; font-size: clamp(28px, 4vw, 44px); margin: 0 0 10px; }
      header p { margin: 0 0 24px; opacity:.8; }
      .btns { display:flex; flex-wrap:wrap; gap:10px; margin: 8px 0 24px; }
      .btn {
        border: 1px solid #111; padding: 10px 14px; text-decoration: none; color:#111;
        display:inline-block; border-radius: 8px; transition: transform .05s ease-in-out;
      }
      .btn:hover { transform: translateY(-1px); }
      .grid { display:grid; grid-template-columns: 1fr; gap: 24px; }
      @media (min-width:720px) { .grid { grid-template-columns: 1fr 1fr; align-items:start; } }
      iframe { width:100%; aspect-ratio:16/9; border: 1px solid #111; border-radius: 10px; }
      section { margin-top: 28px; }
      h2 { font-weight: 300; margin: 0 0 12px; font-size: clamp(22px, 3vw, 28px); }
      .bio p { margin: 0 0 10px; }
      .members { list-style: "‚Äî "; padding-left: 1ch; margin: 10px 0 0; }
      footer { margin-top: 36px; opacity:.65; font-size: .95rem; }
      .muted { opacity:.7; }

      /* Listes d'√©v√©nements */
      #actus, #historique { margin-top: 28px; }
      .events { list-style: none; padding: 0; margin: 0; }
      .events li { padding: 10px 0; border-top: 1px solid #1112; }
      .events li:first-child { border-top: 0; }
      .sep { opacity: .5; padding: 0 6px; }
      .mini { font-size: .95rem; text-decoration: underline; }
      .note { opacity: .6; }
    </style>
  </head>
  <body>
    <main class="wrap">
      <nav class="topnav">
        <a href="/">Accueil</a>
        <a href="/media">M√©dias</a>
      </nav>

      <header>
        <h1>Les Cavistes</h1>
        <p class="muted">Musique de quartiers ‚Äî Live EP</p>
        <div class="btns">
          <a class="btn" href={links.spotify} target="_blank" rel="noopener">Spotify</a>
          <a class="btn" href={links.deezer} target="_blank" rel="noopener">Deezer</a>
          <a class="btn" href={links.apple} target="_blank" rel="noopener">Apple&nbsp;Music</a>
          <a class="btn" href={links.tidal} target="_blank" rel="noopener">Tidal</a>
          <a class="btn" href={links.ytmusic} target="_blank" rel="noopener">YouTube&nbsp;Music</a>
          <a class="btn" href={links.bandcamp} target="_blank" rel="noopener">Bandcamp</a>
        </div>
      </header>

      <div class="grid">
        <section>
          <h2>Clip</h2>
          <iframe
            src={links.video}
            title="Les Cavistes ‚Äî Clip"
            allow="accelerometer; clipboard-write; encrypted-media; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
          </iframe>
        </section>

        <section class="bio">
          <h2>Bio</h2>
          <p>Les Cavistes, musique de quartiers.</p>
          <p>Parfois amer, l√©g√®re ou cors√©e, leur musique embarquera un public joyeux tout proche d'eux üé∂</p>
          <p>Compositions, musique fran√ßaise et du monde, tubes plan√©taires ou p√©pites sonores, il y en aura pour tous les go√ªts !</p>
          <p>M√™me s'ils s'√©clatent sur sc√®ne, une chose est s√ªre : ces gars l√† pr√©f√®reraient boire un coup avec vous ! üçª</p>
          <ul class="members">
            <li>Pablo Felez : accord√©on diatonique excit√© et voix survolt√©e ! ü™ó</li>
            <li>Julien Bachelier : guitariste gaucher et compositeur de talent ! üé∏</li>
            <li>baq : banjo, voix incisive et challenger des temps ! ü™ï</li>
            <li>Arthur Lecoq : percussions aux impacts de feu ! ü•Å</li>
          </ul>
          <div class="btns" style="margin-top:16px">
            <a class="btn" href={links.instagram} target="_blank" rel="noopener">Instagram</a>
            <a class="btn" href={links.facebook} target="_blank" rel="noopener">Facebook</a>
          </div>
        </section>

        <section id="actus">
          <h2>Actus / Dates</h2>
          <ul class="events">
            {events.map(ev => (
              <li itemprop="event" itemscope itemtype="https://schema.org/MusicEvent">
                <time datetime={ev.date} itemprop="startDate">{formatDate(ev.date)}</time>
                <span class="sep">¬∑</span>
                <span itemprop="name">{ev.title}</span>
                <span class="sep">¬∑</span>
                <span itemprop="location" itemscope itemtype="https://schema.org/Place">
                  <span itemprop="addressLocality">{ev.city}</span>
                </span>
                {ev.links?.map(l => (
                  <>
                    <span class="sep">¬∑</span>
                    <a class="mini" href={l.url} target="_blank" rel="noopener">{l.label}</a>
                  </>
                ))}
                {ev.note && <span class="note"> ‚Äî {ev.note}</span>}
              </li>
            ))}
          </ul>
        </section>

        <section id="historique">
          <h2>Historique (s√©lection)</h2>
          <ul class="events">
            {[...past].sort((a,b) => new Date(b.date) - new Date(a.date)).map(ev => (
              <li itemprop="event" itemscope itemtype="https://schema.org/MusicEvent">
                <time datetime={ev.date} itemprop="startDate">{formatDate(ev.date)}</time>
                <span class="sep">¬∑</span>
                <span itemprop="name">{ev.title}</span>
                <span class="sep">¬∑</span>
                <span itemprop="location" itemscope itemtype="https://schema.org/Place">
                  <span itemprop="addressLocality">{ev.city}</span>
                </span>
                {ev.links?.map(l => (
                  <>
                    <span class="sep">¬∑</span>
                    <a class="mini" href={l.url} target="_blank" rel="noopener">{l.label}</a>
                  </>
                ))}
                {ev.note && <span class="note"> ‚Äî {ev.note}</span>}
              </li>
            ))}
          </ul>
        </section>
      </div>

      <footer>
        ¬© Les Cavistes ‚Äî Merci d‚Äô√©couter et de partager.
      </footer>
    </main>
  </body>
</html>
